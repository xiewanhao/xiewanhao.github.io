<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"xiewanhao.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="article">
<meta property="og:title" content="champsim">
<meta property="og:url" content="http://xiewanhao.github.io/2024/11/16/champsim/index.html">
<meta property="og:site_name" content="shiftdlog的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-11-15T17:12:45.000Z">
<meta property="article:modified_time" content="2024-11-18T06:17:05.901Z">
<meta property="article:author" content="XIE">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://xiewanhao.github.io/2024/11/16/champsim/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://xiewanhao.github.io/2024/11/16/champsim/","path":"2024/11/16/champsim/","title":"champsim"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>champsim | shiftdlog的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">shiftdlog的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录AI学习生涯</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Configuration-environment"><span class="nav-number">1.</span> <span class="nav-text">Configuration environment</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-necessary-dependencies"><span class="nav-number">1.1.</span> <span class="nav-text">Install necessary dependencies</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-vcpkg"><span class="nav-number">1.2.</span> <span class="nav-text">Install vcpkg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Initialize-the-submodule"><span class="nav-number">1.3.</span> <span class="nav-text">Initialize the submodule</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Compile"><span class="nav-number">2.</span> <span class="nav-text">Compile</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Download-DPC-3-trace"><span class="nav-number">3.</span> <span class="nav-text">Download DPC-3 trace</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Run-simulation"><span class="nav-number">4.</span> <span class="nav-text">Run simulation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Add-your-own-branch-predictor-data-prefetchers-and-replacement-policy"><span class="nav-number">5.</span> <span class="nav-text">Add your own branch predictor, data prefetchers, and replacement policy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-create-traces"><span class="nav-number">6.</span> <span class="nav-text">How to create traces</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Evaluate-Simulation"><span class="nav-number">7.</span> <span class="nav-text">Evaluate Simulation</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="XIE"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">XIE</p>
  <div class="site-description" itemprop="description">小白一枚，求大神带带</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xiewanhao.github.io/2024/11/16/champsim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="XIE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="shiftdlog的博客">
      <meta itemprop="description" content="小白一枚，求大神带带">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="champsim | shiftdlog的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          champsim
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-16 01:12:45" itemprop="dateCreated datePublished" datetime="2024-11-16T01:12:45+08:00">2024-11-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-11-18 14:17:05" itemprop="dateModified" datetime="2024-11-18T14:17:05+08:00">2024-11-18</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><div></div>
<span id="more"></span>
# ChampSim

<p>ChampSim is a trace-based simulator for a microarchitecture study. If you have questions about how to use ChampSim, we encourage you to search the threads in the Discussions tab or start your own thread. If you are aware of a bug or have a feature request, open a new Issue.</p>
<h1 id="Configuration-environment"><a href="#Configuration-environment" class="headerlink" title="Configuration environment"></a>Configuration environment</h1><p>This is a simple example of configuration enviroment (Suppose you are using Ubuntu system)</p>
<h2 id="Install-necessary-dependencies"><a href="#Install-necessary-dependencies" class="headerlink" title="Install necessary dependencies"></a>Install necessary dependencies</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">suao apt-get install -y build-essential git</span><br></pre></td></tr></table></figure>
<h2 id="Install-vcpkg"><a href="#Install-vcpkg" class="headerlink" title="Install vcpkg"></a>Install vcpkg</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/microsoft/vcpkg.git</span><br><span class="line">cd vcpkg</span><br><span class="line">./bootstrap-vcpkg.sh</span><br></pre></td></tr></table></figure>
<h2 id="Initialize-the-submodule"><a href="#Initialize-the-submodule" class="headerlink" title="Initialize the submodule"></a>Initialize the submodule</h2><p>ChampSim uses <a target="_blank" rel="noopener" href="https://vcpkg.io/">vcpkg</a> to manage its dependencies. In this repository, vcpkg is included as a submodule. You can download the dependencies with</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --init</span><br><span class="line">vcpkg/bootstrap-vcpkg.sh</span><br><span class="line">vcpkg/vcpkg install</span><br></pre></td></tr></table></figure>

<h1 id="Compile"><a href="#Compile" class="headerlink" title="Compile"></a>Compile</h1><p>ChampSim takes a JSON configuration script. Examine <code>champsim_config.json</code> for a fully-specified example. All options described in this file are optional and will be replaced with defaults if not specified. The configuration scrip can also be run without input, in which case an empty file is assumed.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./config.sh &lt;configuration file&gt;</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure>

<h1 id="Download-DPC-3-trace"><a href="#Download-DPC-3-trace" class="headerlink" title="Download DPC-3 trace"></a>Download DPC-3 trace</h1><p>Traces used for the 3rd Data Prefetching Championship (DPC-3) can be found here. (<a target="_blank" rel="noopener" href="https://dpc3.compas.cs.stonybrook.edu/champsim-traces/speccpu/">https://dpc3.compas.cs.stonybrook.edu/champsim-traces/speccpu/</a>) A set of traces used for the 2nd Cache Replacement Championship (CRC-2) can be found from this link. (<a target="_blank" rel="noopener" href="http://bit.ly/2t2nkUj">http://bit.ly/2t2nkUj</a>)</p>
<p>Storage for these traces is kindly provided by Daniel Jimenez (Texas A&amp;M University) and Mike Ferdman (Stony Brook University). If you find yourself frequently using ChampSim, it is highly encouraged that you maintain your own repository of traces, in case the links ever break.</p>
<h1 id="Run-simulation"><a href="#Run-simulation" class="headerlink" title="Run simulation"></a>Run simulation</h1><p>Execute the binary directly.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bin/champsim --warmup_instructions 200000000 --simulation_instructions 500000000 ~/path/to/traces/600.perlbench_s-210B.champsimtrace.xz</span><br></pre></td></tr></table></figure>

<p>The number of warmup and simulation instructions given will be the number of instructions retired. Note that the statistics printed at the end of the simulation include only the simulation phase.</p>
<h1 id="Add-your-own-branch-predictor-data-prefetchers-and-replacement-policy"><a href="#Add-your-own-branch-predictor-data-prefetchers-and-replacement-policy" class="headerlink" title="Add your own branch predictor, data prefetchers, and replacement policy"></a>Add your own branch predictor, data prefetchers, and replacement policy</h1><p><strong>Copy an empty template</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir prefetcher/mypref</span><br><span class="line">$ cp prefetcher/no_l2c/no.cc prefetcher/mypref/mypref.cc</span><br></pre></td></tr></table></figure>

<p><strong>Work on your algorithms with your favorite text editor</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim prefetcher/mypref/mypref.cc</span><br></pre></td></tr></table></figure>

<p><strong>Compile and test</strong><br>Add your prefetcher to the configuration file.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;L2C&quot;: &#123;</span><br><span class="line">        &quot;prefetcher&quot;: &quot;mypref&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that the example prefetcher is an L2 prefetcher. You might design a prefetcher for a different level.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./config.sh &lt;configuration file&gt;</span><br><span class="line">$ make</span><br><span class="line">$ bin/champsim --warmup_instructions 200000000 --simulation_instructions 500000000 600.perlbench_s-210B.champsimtrace.xz</span><br></pre></td></tr></table></figure>

<h1 id="How-to-create-traces"><a href="#How-to-create-traces" class="headerlink" title="How to create traces"></a>How to create traces</h1><p>Program traces are available in a variety of locations, however, many ChampSim users wish to trace their own programs for research purposes.<br>Example tracing utilities are provided in the <code>tracer/</code> directory.</p>
<h1 id="Evaluate-Simulation"><a href="#Evaluate-Simulation" class="headerlink" title="Evaluate Simulation"></a>Evaluate Simulation</h1><p>ChampSim measures the IPC (Instruction Per Cycle) value as a performance metric. <br><br>There are some other useful metrics printed out at the end of simulation. <br></p>
<p>Good luck and be a champion! <br></p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/11/15/hello-world/" rel="prev" title="Hello World">
                  <i class="fa fa-angle-left"></i> Hello World
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">XIE</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
